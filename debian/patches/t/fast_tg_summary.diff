From: Jiang Xin <jiangxin@ossxp.com>
Subject: [PATCH] t/fast_tg_summary

Show topgit branch without annihilate check for terse mode, which will increate bash completion speed.

Info: Many tg command's bash completion calling __tg_topics to show topgit branches.
    __tg_topics ()
    {
        tg summary -t
    }


Signed-off-by: Jiang Xin <jiangxin@ossxp.com>

---
 tg-summary.sh |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/tg-summary.sh b/tg-summary.sh
index 50ee883..6a7e806 100644
--- a/tg-summary.sh
+++ b/tg-summary.sh
@@ -53,14 +53,14 @@ fi
 git for-each-ref refs/top-bases |
 	while read rev type ref; do
 		name="${ref#refs/top-bases/}"
-		if branch_annihilated "$name"; then
-			continue;
-		fi;
-
 		if [ -n "$terse" ]; then
 			echo "$name"
 			continue
 		fi
+
+		if branch_annihilated "$name"; then
+			continue;
+		fi;
 		if [ -n "$graphviz" ]; then
 			git cat-file blob "$name:.topdeps" | while read dep; do
 				dep_is_tgish=true
-- 
tg: (341a371..) t/fast_tg_summary (depends on: tgmaster)
